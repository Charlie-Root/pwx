{% extends 'layout.twig' %}
{% block title %}Password Exchange - View {% endblock %}

{% block content %}
  <div class="row">
    <div class="col-sm-12 col-md-4 col-md-offset-4 page-container">
      {% if userName %}
        <div class="panel panel-default">
          <div class="panel-heading">User Name</div>
          <div class="panel-body">
            {{ userName | e }}
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">Password</div>
          <div class="panel-body">
            {{ password | e }}
          </div>
        </div>
        {% if comment %}
          <div class="panel panel-default">
            <div class="panel-heading">Comment</div>
            <div class="panel-body">
              {{ comment | e | nl2br }}
            </div>
          </div>
        {% endif %}
        <div class="panel panel-default">
          <div class="panel-heading">This will expire in</div>
          <div class="panel-body">
            <script>
              $(document).ready(function() {
                $('#expires').countdown('{{ expires }}', countdownCallback);
              });
            </script>
            <div id="expires"></div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">Share this link</div>
          <div class="panel-body link-container">
            <span id="link">{{ (app.request.host ~ app.request.baseUrl ~ '/pw/' ~ hash) }}</span>
            <button type="button" class="btn btn-default" title="Copy to clipboard"><span class="glyphicon glyphicon-copy"></span></button>
          </div>
        </div>

        <form method="post" action="/delete">
          <button type="submit" class="btn btn-danger" title="Delete this entry"><span class="glyphicon glyphicon-remove"></span> Delete</button>
          <input type="hidden" name="hash" value="{{ hash }}" />
        </form>
      {% else %}
        <div class="alert alert-danger" role="alert"><span class="glyphicon glyphicon-alert"></span> The requested record has expired!</div>
      {% endif %}
    </div>
  </div>
{% endblock %}
